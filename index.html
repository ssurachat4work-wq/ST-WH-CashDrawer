<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÉ‡∏ö‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î (Cash Drawer) - Smart Fit A4</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; -webkit-font-smoothing: antialiased; }
        
        /* ‡∏õ‡∏£‡∏±‡∏ö Input Number ‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏®‡∏£ */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        input[type="date"]::-webkit-calendar-picker-indicator,
        input[type="time"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
            opacity: 0.8;
        }

        /* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ A4 */
        @media print {
            @page {
                size: A4;
                margin: 0;
            }
            body {
                background: white;
            }
            #printable-area {
                width: 100%;
                max-width: none;
                box-shadow: none;
                border: none;
                border-radius: 0;
                padding: 20px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏Ç‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏à‡∏£‡∏¥‡∏á */
            }
            /* ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≠‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå */
            .no-print { display: none !important; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const IconPrinter = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;
        const IconRefresh = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg>;
        const IconCopy = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>;
        const IconCheck = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>;
        const IconExcel = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="M8 13h2"></path><path d="M8 17h2"></path><path d="M14 13h2"></path><path d="M14 17h2"></path></svg>;
        const IconImage = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>;
        const IconUser = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>;

        const blockInvalidChar = (e) => ['e', 'E', '+', '-'].includes(e.key) && e.preventDefault();

        // --- Component ‡πÅ‡∏ñ‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô) ---
        const DenomRow = ({ label, qtyName, qtyValue, amount, onChange, formatCurrency }) => (
            <div className="grid grid-cols-12 gap-2 items-center py-1 border-b border-gray-100 text-sm hover:bg-gray-50 transition-colors">
                <div className="col-span-3 font-semibold text-gray-700 text-base">{label}</div>
                <div className="col-span-4">
                    <input 
                        type="number" 
                        min="0"
                        name={qtyName} 
                        value={qtyValue} 
                        onChange={onChange}
                        onKeyDown={blockInvalidChar} 
                        placeholder="0" 
                        // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (h-8) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
                        className="w-full h-8 p-1 border border-gray-300 rounded text-center focus:border-blue-500 outline-none text-lg transition-colors focus:ring-2 focus:ring-blue-100 bg-white" 
                    />
                </div>
                <div className="col-span-5 text-right font-mono text-gray-900 bg-gray-50 p-1 rounded text-base">
                    {formatCurrency(amount)}
                </div>
            </div>
        );

        function App() {
            const initialState = {
                branch: '', 
                date: new Date().toISOString().split('T')[0],
                time: new Date().toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' }),
                returnWrongKey: '', totalSale: '', creditCard: '', debit: '', wechat: '', alipay: '',
                qty1000: '', qty500: '', qty100: '', qty50: '', qty20: '', 
                qty10: '', qty5: '', qty2: '', qty1: '', 
                cashPos: '', recipient: '', note: ''
            };

            const [formData, setFormData] = useState(initialState);
            const [calculations, setCalculations] = useState({ totalCashReal: 0, overShort: 0, breakdown: {} });
            const [copied, setCopied] = useState(false);
            const [isGeneratingImg, setIsGeneratingImg] = useState(false);
            const [isLoaded, setIsLoaded] = useState(false);

            useEffect(() => {
                const savedData = localStorage.getItem('cashDrawerData_SmartFit');
                if (savedData) {
                    try { setFormData(JSON.parse(savedData)); } catch (e) { console.error(e); }
                }
                setIsLoaded(true);
            }, []);

            useEffect(() => {
                if (isLoaded) localStorage.setItem('cashDrawerData_SmartFit', JSON.stringify(formData));
            }, [formData, isLoaded]);

            useEffect(() => {
                const parse = (val) => parseFloat(val) || 0;
                const safeFloat = (num) => Math.round(num * 100) / 100;

                const breakdown = {
                    amt1000: safeFloat(parse(formData.qty1000) * 1000),
                    amt500: safeFloat(parse(formData.qty500) * 500),
                    amt100: safeFloat(parse(formData.qty100) * 100),
                    amt50: safeFloat(parse(formData.qty50) * 50),
                    amt20: safeFloat(parse(formData.qty20) * 20),
                    amt10: safeFloat(parse(formData.qty10) * 10),
                    amt5: safeFloat(parse(formData.qty5) * 5),
                    amt2: safeFloat(parse(formData.qty2) * 2),
                    amt1: safeFloat(parse(formData.qty1) * 1),
                };
                
                const totalCashReal = safeFloat(Object.values(breakdown).reduce((a, b) => a + b, 0));
                const cashPos = parse(formData.cashPos);
                const overShort = cashPos ? safeFloat(totalCashReal - cashPos) : 0;
                
                setCalculations({ totalCashReal, overShort, breakdown });
            }, [formData]);

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handlePrint = () => window.print();

            const handleSaveImage = async () => {
                setIsGeneratingImg(true);
                await new Promise(r => setTimeout(r, 100)); // ‡∏£‡∏≠ Render ‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á
                try {
                    const element = document.getElementById('printable-area');
                    const canvas = await html2canvas(element, {
                        scale: 3, 
                        backgroundColor: "#ffffff",
                        useCORS: true,
                        logging: false,
                        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á
                        windowHeight: element.scrollHeight + 50, 
                        onclone: (doc) => {
                            const el = doc.getElementById('printable-area');
                            if(el) {
                                el.style.boxShadow = 'none';
                                el.style.border = 'none'; // ‡πÄ‡∏≠‡∏≤‡∏Ç‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô‡πÄ‡∏ã‡∏ü‡∏£‡∏π‡∏õ
                                el.style.borderRadius = '0';
                                el.style.padding = '20px'; // ‡πÄ‡∏û‡∏¥‡πà‡∏° Padding ‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏î‡∏π‡πÑ‡∏°‡πà‡∏≠‡∏∂‡∏î‡∏≠‡∏±‡∏î
                            }
                        }
                    });
                    const link = document.createElement('a');
                    link.download = `CashReport_${formData.date}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } catch (err) { alert("Error creating image: " + err); }
                setIsGeneratingImg(false);
            };

            const handleExportCSV = () => {
                const bom = "\uFEFF"; 
                const csvContent = [
                    ["Branch", formData.branch], ["Date", formData.date], ["Time", formData.time],
                    ["Total Sale", formData.totalSale], ["Cash POS", formData.cashPos],
                    ["Total Cash Real", calculations.totalCashReal], ["Over/Short", calculations.overShort]
                ].map(e => e.join(",")).join("\n");
                const blob = new Blob([bom + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = `CashReport_${formData.date}.csv`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            const handleCopyText = () => {
                const text = `üõí *Cash Report*\nüìç ${formData.branch} (${formData.date} ${formData.time})\nüí∞ Sale: ${formData.totalSale}\nüíµ Real: ${calculations.totalCashReal}\nüñ• POS: ${formData.cashPos}\n${calculations.overShort > 0 ? '‚úÖ Over: +' : calculations.overShort < 0 ? '‚ùå Short: ' : '‚öñÔ∏è '}${calculations.overShort}\nüìù ${formData.note}`;
                navigator.clipboard.writeText(text);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const handleReset = () => {
                if(window.confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
                    localStorage.removeItem('cashDrawerData_SmartFit');
                    setFormData(initialState);
                }
            };

            const formatCurrency = (num) => new Intl.NumberFormat('th-TH', { style: 'decimal', minimumFractionDigits: 2 }).format(num);

            if (!isLoaded) return <div className="p-10 text-center">Loading...</div>;

            return (
                <div className="min-h-screen p-2 sm:p-8 font-sans print:bg-white print:p-0 bg-gray-100">
                    
                    {/* Control Panel (Hidden when printing) */}
                    <div className="max-w-3xl mx-auto mb-4 flex flex-col gap-4 print:hidden bg-white p-4 rounded-xl shadow-sm border border-gray-200 no-print">
                        <div className="flex justify-between items-center">
                            <h1 className="text-lg font-bold text-gray-800">‡πÉ‡∏ö‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î (Smart Fit)</h1>
                            <span className="text-xs text-green-600 bg-green-50 px-2 py-1 rounded border border-green-200">üíæ Auto-Saved</span>
                        </div>
                        <div className="flex flex-wrap justify-center sm:justify-start gap-2">
                            <button onClick={handleReset} className="flex items-center gap-1 px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 text-sm font-medium transition-colors"><IconRefresh /> Reset</button>
                            <button onClick={handleCopyText} className="flex items-center gap-1 px-3 py-2 bg-indigo-50 text-indigo-700 border border-indigo-200 rounded-lg hover:bg-indigo-100 text-sm font-medium transition-colors">{copied ? <IconCheck /> : <IconCopy />} {copied ? 'Copied!' : 'Text'}</button>
                            <button onClick={handleExportCSV} className="flex items-center gap-1 px-3 py-2 bg-green-50 text-green-700 border border-green-200 rounded-lg hover:bg-green-100 text-sm font-medium transition-colors"><IconExcel /> Excel</button>
                            <button onClick={handleSaveImage} disabled={isGeneratingImg} className="flex items-center gap-1 px-3 py-2 bg-orange-50 text-orange-700 border border-orange-200 rounded-lg hover:bg-orange-100 text-sm font-medium transition-colors">
                                <IconImage /> {isGeneratingImg ? 'Creating...' : 'Image'}
                            </button>
                            <button onClick={handlePrint} className="flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm text-sm font-medium transition-colors"><IconPrinter /> PDF/Print</button>
                        </div>
                    </div>

                    {/* --- PRINTABLE AREA --- */}
                    {/* ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÄ‡∏≠‡∏≤ overflow-hidden ‡∏≠‡∏≠‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏Ç‡∏≤‡∏î ‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î max-width ‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ A4 */}
                    <div id="printable-area" className="max-w-[210mm] mx-auto bg-white shadow-lg sm:rounded-lg border border-gray-200 print:shadow-none print:border-none print:w-full print:max-w-none pb-8">
                        
                        {/* HEADER - ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ Compact ‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ */}
                        <div className="bg-slate-800 text-white p-5 print:bg-white print:text-black print:border-b-2 print:border-black print:p-0 print:pb-3 print:mb-4 relative">
                            <div className="flex flex-col sm:flex-row print:flex-row justify-between items-start gap-4 sm:gap-0">
                                <div className="w-full sm:flex-1 print:flex-1 sm:mr-8 print:mr-8">
                                    <label className="block text-sm text-slate-300 print:text-black font-medium mb-1">‡∏™‡∏≤‡∏Ç‡∏≤ / Branch Name</label>
                                    <input 
                                        type="text" 
                                        name="branch" 
                                        value={formData.branch} 
                                        onChange={handleInputChange} 
                                        className="bg-transparent border-b border-slate-500 text-white print:text-black w-full text-xl py-1 focus:outline-none focus:border-blue-400 transition-colors placeholder-slate-500 print:placeholder-transparent" 
                                        placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤..." 
                                    />
                                </div>
                                
                                <div className="flex gap-4 items-end">
                                    <div className="flex flex-col">
                                        <label className="text-sm text-slate-300 print:text-black font-medium mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / Date</label>
                                        <input 
                                            type="date" 
                                            name="date" 
                                            value={formData.date} 
                                            onChange={handleInputChange} 
                                            className="bg-transparent text-white print:text-black text-base border-b border-slate-500 focus:outline-none py-1"
                                        />
                                    </div>
                                    <div className="flex flex-col">
                                        <label className="text-sm text-slate-300 print:text-black font-medium mb-1">‡πÄ‡∏ß‡∏•‡∏≤ / Time</label>
                                        <input 
                                            type="time" 
                                            name="time" 
                                            value={formData.time} 
                                            onChange={handleInputChange} 
                                            className="bg-transparent text-white print:text-black text-base border-b border-slate-500 focus:outline-none py-1 w-28"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* CONTENT - ‡πÉ‡∏ä‡πâ Grid 2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */}
                        <div className="p-5 print:p-0 grid grid-cols-1 md:grid-cols-2 print:grid-cols-2 gap-6 print:gap-6">
                            
                            {/* LEFT COLUMN */}
                            <div className="flex flex-col gap-4">
                                {/* Sale Info Box */}
                                <div className="bg-blue-50 p-4 rounded-xl border border-blue-100 print:bg-transparent print:border print:border-black print:rounded-none">
                                    <h2 className="text-lg font-bold text-blue-800 mb-3 border-b border-blue-200 pb-2 print:text-black print:border-black flex items-center gap-2">
                                        Sale Information
                                    </h2>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between items-center">
                                            <label className="font-semibold text-gray-700 text-base">Total Sale</label>
                                            <input type="number" min="0" onKeyDown={blockInvalidChar} name="totalSale" value={formData.totalSale} onChange={handleInputChange} className="w-40 h-10 text-right border border-gray-300 rounded px-2 text-xl bg-white focus:border-blue-500 outline-none focus:ring-2 focus:ring-blue-100 transition-all font-bold" placeholder="0.00" />
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <label className="font-semibold text-red-600 print:text-black text-base">Return/Wrong Key</label>
                                            <input type="number" min="0" onKeyDown={blockInvalidChar} name="returnWrongKey" value={formData.returnWrongKey} onChange={handleInputChange} className="w-40 h-10 text-right border border-gray-300 rounded px-2 text-xl bg-white focus:border-red-500 outline-none focus:ring-2 focus:ring-red-100 transition-all text-red-600 font-bold" placeholder="0.00" />
                                        </div>
                                        
                                        <div className="border-t border-gray-200 my-2 pt-2 space-y-2">
                                            <div className="flex justify-between items-center text-gray-600">
                                                <label className="font-medium text-base">Credit Card</label>
                                                <input type="number" min="0" onKeyDown={blockInvalidChar} name="creditCard" value={formData.creditCard} onChange={handleInputChange} className="w-28 h-8 text-right border border-gray-300 rounded px-2 bg-white focus:border-blue-400 outline-none text-base" />
                                            </div>
                                            <div className="flex justify-between items-center text-gray-600">
                                                <label className="font-medium text-base">Debit Card</label>
                                                <input type="number" min="0" onKeyDown={blockInvalidChar} name="debit" value={formData.debit} onChange={handleInputChange} className="w-28 h-8 text-right border border-gray-300 rounded px-2 bg-white focus:border-blue-400 outline-none text-base" />
                                            </div>
                                            <div className="flex justify-between items-center text-gray-600">
                                                <label className="font-medium text-base">WeChat</label>
                                                <input type="number" min="0" onKeyDown={blockInvalidChar} name="wechat" value={formData.wechat} onChange={handleInputChange} className="w-28 h-8 text-right border border-gray-300 rounded px-2 bg-white focus:border-blue-400 outline-none text-base" />
                                            </div>
                                            <div className="flex justify-between items-center text-gray-600">
                                                <label className="font-medium text-base">Alipay</label>
                                                <input type="number" min="0" onKeyDown={blockInvalidChar} name="alipay" value={formData.alipay} onChange={handleInputChange} className="w-28 h-8 text-right border border-gray-300 rounded px-2 bg-white focus:border-blue-400 outline-none text-base" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Recipient & Note Box */}
                                <div className="bg-gray-50 p-4 rounded-xl border border-gray-200 print:bg-transparent print:border print:border-black print:rounded-none flex flex-col gap-3">
                                    <div>
                                        <label className="flex items-center gap-2 text-sm font-bold text-gray-700 mb-1 print:text-black">
                                            <IconUser /> Recipient Name / ‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô
                                        </label>
                                        <div className="relative">
                                            <input 
                                                type="text" 
                                                name="recipient" 
                                                value={formData.recipient} 
                                                onChange={handleInputChange}
                                                className="w-full p-2 pl-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all text-base"
                                                placeholder="‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô..."
                                            />
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-1 print:text-black">Note / ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                                        <textarea 
                                            name="note" 
                                            value={formData.note} 
                                            onChange={handleInputChange} 
                                            rows="4" 
                                            className="w-full p-2 border border-gray-300 rounded-lg text-base focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none bg-white transition-all resize-none"
                                            placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."
                                        ></textarea>
                                    </div>
                                </div>
                            </div>

                            {/* RIGHT COLUMN */}
                            <div className="flex flex-col gap-4">
                                <div className="bg-green-50 p-4 rounded-xl border border-green-100 print:bg-transparent print:border print:border-black print:rounded-none h-full">
                                    <h2 className="text-lg font-bold text-green-800 mb-3 border-b border-green-200 pb-2 flex justify-between items-center print:text-black print:border-black">
                                        Money in Drawer
                                    </h2>

                                    {/* Denominations - Padding ‡∏•‡∏î‡∏•‡∏á‡πÉ‡∏ô DenomRow Component */}
                                    <div className="mb-4">
                                        <DenomRow label="1,000" qtyName="qty1000" qtyValue={formData.qty1000} amount={calculations.breakdown.amt1000} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="500" qtyName="qty500" qtyValue={formData.qty500} amount={calculations.breakdown.amt500} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="100" qtyName="qty100" qtyValue={formData.qty100} amount={calculations.breakdown.amt100} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="50" qtyName="qty50" qtyValue={formData.qty50} amount={calculations.breakdown.amt50} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="20" qtyName="qty20" qtyValue={formData.qty20} amount={calculations.breakdown.amt20} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="10" qtyName="qty10" qtyValue={formData.qty10} amount={calculations.breakdown.amt10} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="5" qtyName="qty5" qtyValue={formData.qty5} amount={calculations.breakdown.amt5} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="2" qtyName="qty2" qtyValue={formData.qty2} amount={calculations.breakdown.amt2} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                        <DenomRow label="1" qtyName="qty1" qtyValue={formData.qty1} amount={calculations.breakdown.amt1} onChange={handleInputChange} formatCurrency={formatCurrency} />
                                    </div>

                                    <div className="pt-3 border-t-2 border-green-200 print:border-black">
                                        <div className="flex justify-between items-center mb-2">
                                            <span className="font-bold text-base text-gray-700">Cash Real / ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏à‡∏£‡∏¥‡∏á</span>
                                            <span className="text-xl font-bold text-gray-900">{formatCurrency(calculations.totalCashReal)}</span>
                                        </div>
                                        <div className="flex justify-between items-center mb-3 text-base text-gray-600 print:text-black">
                                            <span className="font-medium">Cash POS / ‡∏¢‡∏≠‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</span>
                                            <input type="number" min="0" onKeyDown={blockInvalidChar} name="cashPos" value={formData.cashPos} onChange={handleInputChange} placeholder="0.00" className="w-40 h-10 px-2 text-right border border-gray-300 rounded text-xl bg-white focus:border-blue-500 outline-none focus:ring-2 focus:ring-blue-100 font-bold" />
                                        </div>
                                        <div className={`p-3 rounded-lg flex justify-between items-center border-2 ${calculations.overShort === 0 ? 'bg-gray-100 border-gray-200 text-gray-600' : calculations.overShort > 0 ? 'bg-green-100 border-green-300 text-green-800' : 'bg-red-100 border-red-300 text-red-800'} print:border-black print:bg-transparent print:text-black`}>
                                            <div className="font-bold text-sm uppercase flex items-center gap-2">
                                                {calculations.overShort === 0 ? 'Balanced (‡∏û‡∏≠‡∏î‡∏µ)' : calculations.overShort > 0 ? 'OVER (+ ‡πÄ‡∏Å‡∏¥‡∏ô)' : 'SHORT (- ‡∏Ç‡∏≤‡∏î)'}
                                            </div>
                                            <div className="text-2xl font-bold font-mono">{formatCurrency(Math.abs(calculations.overShort))}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="text-center text-xs text-gray-400 mt-6 pb-4 print:hidden">
                        ¬© Cash Drawer System - Smart Fit Version
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
